<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Papers Page</title>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="./css/add-organize-papers.css" />
  <link rel="stylesheet" href="./css/advanced-features.css" />
  <link rel="icon" href="./favicon/favicon-48x48.png" type="image/png" />

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="48x48"
      href="./favicon/favicon-48x48.png"
    />
    <link rel="manifest" href="./favicon/site.webmanifest" />
</head>

<body>
  <!-- Add Your Papers Section -->
  <section id="add-section" class="add-section">
    <h2>âž‹ Add Your Papers</h2>
    <p>
      Upload PDFs, add paper details manually, or import from existing
      libraries.
    </p>

    <div class="upload-box">
      <p>Drag & Drop your papers here</p>
      <p>or</p>
      <input type="file" id="fileUpload" multiple />
      <label for="fileUpload">Choose Files</label>
    </div>

    <div class="file-list" id="fileList"></div>
    <div class="prevImage"></div>
  </section>

  <!-- Organize & Search Section -->
  <section id="organize-section" class="organize-section">
    <h2>âžŒ Organize & Search</h2>
    <p>
      Use tags, topics, and ratings to organize your collection and find
      papers instantly.
    </p>
    <div class="search">
      <input type="search" id="searchPapers" placeholder="Search Your Papers.." />
    </div>
    <div class="tags">
      <div class="tag">Machine Learning</div>
      <div class="tag">AI</div>
      <div class="tag">Blockchain</div>
      <div class="tag">Data Science</div>
      <div class="tag">NLP</div>
      <div class="tag">Healthcare</div>
    </div>
  </section>

  <!-- Advanced Features Section -->
  <section class="advanced-features">
    <h2>ðŸš€ Advanced Research Tools</h2>
    <div class="features-nav">
      <button onclick="showClusterView()" class="feature-btn">ðŸ“Š Paper Clustering</button>
      <button onclick="showTrendDashboard()" class="feature-btn">ðŸ“ˆ Trend Analysis</button>
      <button onclick="showMetricsDashboard()" class="feature-btn">ðŸ“‹ Research Metrics</button>
      <button onclick="showCitationNetwork()" class="feature-btn">ðŸ”— Citation Network</button>
      <button onclick="showCollaborationHub()" class="feature-btn">ðŸ‘¥ Collaboration</button>
      <button onclick="showExpertMatching()" class="feature-btn">ðŸŽ¯ Expert Matching</button>
      <button onclick="showImpactDashboard()" class="feature-btn">âš¡ Impact Predictor</button>
    </div>
    
    <!-- Feature Containers -->
    <div id="clusterView" class="feature-container hidden"></div>
    <div id="networkView" class="feature-container hidden"></div>
    <div id="trendDashboard" class="feature-container hidden"></div>
    <div id="metricsDashboard" class="feature-container hidden"></div>
    <div id="citationNetwork" class="feature-container hidden"></div>
    <div id="collaborationHub" class="feature-container hidden"></div>
    <div id="expertMatching" class="feature-container hidden"></div>
    <div id="impactDashboard" class="feature-container hidden"></div>
    
    <!-- Modal Containers -->
    <div id="goalModal" class="modal-overlay hidden"></div>
    <div id="createSpaceModal" class="modal-overlay hidden"></div>
    <div id="readingInterface" class="modal-overlay hidden"></div>
    <div id="sessionResults" class="modal-overlay hidden"></div>
    <div id="relatedPapers" class="feature-container hidden"></div>
    <div id="gapSuggestions" class="feature-container hidden"></div>
    <div id="citationPath" class="feature-container hidden"></div>
    <div id="spaceView" class="feature-container hidden"></div>
    <div id="collaborativePaper" class="feature-container hidden"></div>
    <div id="impactDetails" class="feature-container hidden"></div>
  </section>

  <script>
    const fileInput = document.getElementById("fileUpload");
    const fileList = document.getElementById("fileList");
    const prevDiv = document.querySelector(".prevImage");

    fileInput.addEventListener("change", () => {
      fileList.innerHTML = ""; // clear old list
      prevDiv.innerHTML = "";
      Array.from(fileInput.files).forEach((file, index) => {
        const fileItem = document.createElement("div");
        fileItem.className = "file-item";

        fileItem.innerHTML = `<span>${file.name}</span> (${(
          file.size / 1024
        ).toFixed(1)} KB)`;

        if (file) {

          const previewBtn = document.createElement("button");
          previewBtn.className = "preview-btn";

          previewBtn.innerHTML = '<i class="fa fa-eye"></i> Preview';
          let previewImg;

          if (file.type.startsWith("image/")) {
            previewImg = document.createElement("img");
            previewImg.className = "preview-img";
          } else {
            previewImg = document.createElement("iframe");
            previewImg.className = "preview-frame preview-img";
          }
          previewImg.style.display = "none";

          previewBtn.addEventListener("click", () => {
            if (previewImg.style.display === "none") {
              const fileURL = URL.createObjectURL(file);
              previewImg.src = fileURL;
              previewImg.style.display = "block";
              previewBtn.innerHTML = '<i class="fa fa-eye-slash"></i> Close Preview';
            } else {
              previewImg.style.display = "none";
              previewBtn.innerHTML = '<i class="fa fa-eye"></i> Preview';
            }
          });

          fileItem.appendChild(previewBtn);
          prevDiv.appendChild(previewImg);
        }

        fileList.appendChild(fileItem);
      });
    });
  </script>
  <script>
    const toggleBtn = document.getElementById('darkModeToggle');

    // Check if user has a saved preference
    if (localStorage.getItem('darkMode') === 'enabled') {
      document.body.classList.add('dark-mode');
    }

    toggleBtn.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');

      // Save preference
      if (document.body.classList.contains('dark-mode')) {
        localStorage.setItem('darkMode', 'enabled');
      } else {
        localStorage.setItem('darkMode', 'disabled');
      }
    });
  </script>

  <!-- Advanced Features Scripts -->
  <script src="js/clustering.js"></script>
  <script src="js/trend-analysis.js"></script>
  <script src="js/reading-assistant.js"></script>
  <script src="js/impact-predictor.js"></script>
  <script src="js/research-metrics.js"></script>
  <script src="js/cross-reference.js"></script>
  <script src="js/collaboration-hub.js"></script>
  <script src="js/expert-matching.js"></script>
  
  <script>
    // Initialize with sample data for demo
    const papers = [
      {
        id: 1,
        title: "Attention Is All You Need",
        authors: "Vaswani, A., Shazeer, N., Parmar, N., et al.",
        year: 2017,
        topic: "Machine Learning",
        tags: ["transformers", "attention", "nlp"],
        abstract: "The dominant sequence transduction models are based on complex recurrent or convolutional neural networks. We propose a new simple network architecture, the Transformer, based solely on attention mechanisms.",
        rating: 5,
        isFavorite: true
      },
      {
        id: 2,
        title: "BERT: Pre-training of Deep Bidirectional Transformers",
        authors: "Devlin, J., Chang, M. W., Lee, K., Toutanova, K.",
        year: 2018,
        topic: "Machine Learning",
        tags: ["bert", "pre-training", "bidirectional"],
        abstract: "We introduce BERT, which stands for Bidirectional Encoder Representations from Transformers.",
        rating: 4,
        isFavorite: false
      }
    ];
    
    // Feature navigation
    function hideAllFeatures() {
      document.querySelectorAll('.feature-container').forEach(container => {
        container.classList.add('hidden');
      });
    }
    
    // Update feature buttons to hide others when showing new feature
    const originalShowFunctions = {
      showClusterView: window.showClusterView,
      showTrendDashboard: window.showTrendDashboard,
      showMetricsDashboard: window.showMetricsDashboard,
      showCitationNetwork: window.showCitationNetwork,
      showCollaborationHub: window.showCollaborationHub,
      showExpertMatching: window.showExpertMatching,
      showImpactDashboard: window.showImpactDashboard
    };
    
    Object.keys(originalShowFunctions).forEach(funcName => {
      window[funcName] = function() {
        hideAllFeatures();
        if (originalShowFunctions[funcName]) {
          originalShowFunctions[funcName]();
        }
      };
    });
  </script>

</body>

</html>
